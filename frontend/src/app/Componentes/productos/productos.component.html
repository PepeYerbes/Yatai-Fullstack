<div class="container mt-4">
    <h2>Catálogo de Productos</h2>
    
    <!-- Filtros por categoría -->
    <div class="mb-4">
      <div class="btn-group" role="group">
        <button 
          type="button" 
          class="btn btn-outline-primary" 
          (click)="filterByCategory(null)"
          [class.active]="!selectedCategory">
          Todos
        </button>
        @for (category of categories; track category) {
          <button 
            type="button" 
            class="btn btn-outline-primary"
            (click)="filterByCategory(category)"
            [class.active]="selectedCategory === category">
            {{ category }}
          </button>
        }
      </div>
    </div>
  
    <!-- Listado de productos -->
    <div class="row">
      @for (product of products; track product.id) {
        <div class="col-md-4 mb-4">
          <div class="card h-100">
            <img [src]="product.imagenUrl" class="card-img-top p-2" 
              [alt]="product.name" style="height: 200px; object-fit: contain;">
            
            <div class="card-body">
              <h5 class="card-title">{{ product.name }}</h5>
              <p class="card-text">{{ product.description }}</p>
              
              
            </div>
            
            <div class="card-footer bg-white">
              <div class="d-flex justify-content-between align-items-center">
                <span class="h5 mb-0">{{ product.price | currency }}</span>
                <span class="badge bg-secondary">{{ product.category }}</span>
              </div>
              <div class="d-flex justify-content-between align-items-center mt-2">
                <span class="text-muted">Disponibles: {{ product.stock }}</span>
               
              </div>
              <button 
                class="btn btn-primary w-100 mt-2"
                (click)="addToCart(product)"
                [disabled]="product.stock === 0">
                {{ product.stock === 0 ? 'Agotado' : 'Añadir al carrito' }}
              </button>
              <a 
                [routerLink]="['/producto', product.id]" 
                class="btn btn-outline-secondary w-100 mt-2">
                Ver detalles
              </a>
            </div>
          </div>
        </div>
      }
    </div>
  </div>